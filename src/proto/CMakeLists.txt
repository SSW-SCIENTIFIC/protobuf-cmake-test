add_library(protobuf_autogenerated STATIC)

set(Protobuf_IMPORT_DIRS ${CMAKE_CURRENT_SOURCE_DIR}/proto)

protobuf_generate_cpp(
    GENERATED_SRCS
    GENERATED_HDRS
    Message.proto
)

target_sources(protobuf_autogenerated
PRIVATE
    ${GENERATED_SRCS}
    ${GENERATED_HDRS}
)

target_include_directories(protobuf_autogenerated
PRIVATE
    ${CMAKE_CURRENT_BINARY_DIR}
INTERFACE
    $<BUILD_INTERFACE:${CMAKE_CURRENT_BINARY_DIR}>
)
